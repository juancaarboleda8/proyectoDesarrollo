<!DOCTYPE html>
<html>
<head>
	<title>Log In</title>
	<meta charset="utf-8">
	<style type="text/css">
		.input{
			margin: 0 auto;
			text-align: center;
			padding-top: 0.5ex;
		}
		#container{
			background-color: #581c1c;
			margin: 0 auto;
			width: 20%;
			position: relative;
			text-align: center;
			border-radius: 4px;
		}
		#ingresar{
			cursor: pointer;
			margin: 3ex;
			position: relative;
			color: black;
			background-color: #f37736;
		    border: none;
		    border-radius: 4px;
		    padding: 15px 32px;
		    text-align: center;
		    text-decoration: none;
		    font-size: 16px;
		}
		body{
			text-align: center;
			background-color: #fdf498;
		}
		h1{
			font-family: sans-serif;
			font-weight: normal;
			color: white;
		}
		h2{
			font-family: sans-serif;
		}
	</style>

	<script type="text/javascript">
		function guardarDatos() {
			var user = {};
			user.nombre = document.getElementById('Usuario').value;
			user.contrase単a = document.getElementById('Contrase単a').value;
			return user;
		}

		function ingresar() {
		var usuario=guardarDatos();
		
		var serializado = "";
		// Serializar el objeto como una cadena de texto JSON
		serializado = JSON.stringify( usuario );
		window.alert( serializado );
		// Crear un objeto para hacer peticiones HTTP
		var request = new XMLHttpRequest();
		// Abrir una peticion HTTP POST a la url deseado y no asincronico
		request.open( "POST", "/ingresar", false );
		// Ejecuta la peticion HTTP
		request.send( serializado );
		
		// responseText contiene el cuerpo de la respuesta enviada desde el servidor
		// en el objeto XMLHttpRequest
		var respuesta;
		respuesta = JSON.parse( request.responseText );  
		console.log( "Respuesta:" );
		console.log( respuesta );
		
		if(respuesta.estado == 'ok'){
			// Login correcto
			console.log("ingreso correctamente");
			window.location.href = '/perfil.html';
		} else {
			alert("no funciono");
		}
		}
	</script>
</head>
<body>
<h2>Log In</h2>
<div id="container">
	<div class="input">
		<h1>Usuario</h1>
		<input type="text" id="Usuario">
	</div>
	<div class="input">
		<h1>Contrase単a</h1>
		<input type="text" id="Contrase単a">
	</div>
	
	<a><button id="ingresar" onclick="ingresar()">Ingresar</button></a>


</div>

</body>
</html>

